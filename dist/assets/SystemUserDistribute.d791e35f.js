import{_ as p,o as f,d as h,e as I,T as v,F as y,p as V,i as x,f as o,w as s,h as m,E as C,bh as T,cn as w,bE as R,ab as D,c as B,r as g}from"./index.41bf9c1b.js";import{A as U}from"./index.b77e09ac.js";import{E as F,a as A}from"./index.39967f43.js";import{E as S,a as N}from"./el-table-column.4b985531.js";import"./el-popper.7ae0c7d7.js";import{E as q}from"./el-link.e79f8a31.js";import{s as Y}from"./setClipboard.bf8addf7.js";import{f as M}from"./formatDate.66ef0a13.js";import{E as P}from"./index.6f6ffc3e.js";import"./castArray.422477ef.js";import"./isEqual.f69c734a.js";import"./debounce.917afbd5.js";const G={},L=e=>(V("data-v-02f2235d"),e=e(),x(),e),j={class:"block-title"},z=L(()=>I("div",{class:"block-line"},null,-1));function H(e,t,d,n,l,c){return f(),h(y,null,[I("h4",j,[v(e.$slots,"default",{},void 0,!0)]),z],64)}const b=p(G,[["render",H],["__scopeId","data-v-02f2235d"]]);const J={data(){return{userInfo:[]}},methods:{async init(){const{userId:e}=this.$route.query,t=await U({id:e});this.userInfo=t.user}},components:{BlockTitle:b},created(){this.init()}};function K(e,t,d,n,l,c){const u=b,i=C,a=F,k=A;return f(),h(y,null,[o(u,null,{default:s(()=>[m("\u57FA\u672C\u4FE1\u606F")]),_:1}),o(k,{class:"tabForm",ref:"form","label-width":"80px",inline:""},{default:s(()=>[o(a,{class:"tabForm-item",label:"\u771F\u5B9E\u59D3\u540D"},{default:s(()=>[o(i,{modelValue:l.userInfo.realName,"onUpdate:modelValue":t[0]||(t[0]=_=>l.userInfo.realName=_),disabled:""},null,8,["modelValue"])]),_:1}),o(a,{class:"tabForm-item",label:"\u7528\u6237\u540D\u79F0"},{default:s(()=>[o(i,{modelValue:l.userInfo.username,"onUpdate:modelValue":t[1]||(t[1]=_=>l.userInfo.username=_),disabled:""},null,8,["modelValue"])]),_:1})]),_:1},512)],64)}const O=p(J,[["render",K],["__scopeId","data-v-baa565a5"]]),Q=e=>T({url:"/system/user/checked/"+e.id,loading:!0}),W=e=>w({url:"/system/user/grant",data:e,loading:!0});const X={data(){return{tableData:[],userRole:[]}},methods:{async init(){const{userId:e}=this.$route.query,{roles:t,checkedRoleIds:d}=await Q({id:e});t.forEach(n=>{n.checked=d.includes(n.id),n.createTime=M("YYYY-MM-DD",n.createTime)}),this.tableData=t,this.userRole=d},async onEmpowerRoles(){const{userId:e}=this.$route.query;await W(this.tableData.filter(t=>t.checked).map(({id:t})=>({userId:e,roleId:t}))),R.success("\u5206\u914D\u89D2\u8272\u6210\u529F"),this.$router.push("/system/user")},setCopy(e){Y(e)}},computed:{checkedAll:{get(){const e=this.tableData;return e.length===0?!1:e.every(t=>t.checked)},set(e){this.tableData.forEach(t=>t.checked=e)}}},components:{BlockTitle:b},created(){this.init()}},Z={class:"submitForm"};function ee(e,t,d,n,l,c){const u=b,i=P,a=S,k=q,_=N,E=B;return f(),h(y,null,[o(u,null,{default:s(()=>[m("\u89D2\u8272\u4FE1\u606F")]),_:1}),o(_,{ref:"newsTab",data:l.tableData,style:{width:"100%"},stripe:"",border:""},{default:s(()=>[o(a,{width:"40",align:"center"},{header:s(()=>[o(i,{modelValue:c.checkedAll,"onUpdate:modelValue":t[0]||(t[0]=r=>c.checkedAll=r)},null,8,["modelValue"])]),default:s(({row:r})=>[o(i,{modelValue:r.checked,"onUpdate:modelValue":$=>r.checked=$},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(a,{prop:"id",type:"index",width:"80",label:"\u5E8F\u53F7",align:"center"}),o(a,{prop:"roleName",label:"\u89D2\u8272\u540D\u79F0",align:"center"}),o(a,{prop:"rolePerm",label:"\u6743\u9650\u5B57\u7B26",align:"center"},{default:s(({row:r})=>[o(k,{underline:!1,onClick:$=>c.setCopy(r.rolePerm)},{default:s(()=>[m(D(r.rolePerm),1)]),_:2},1032,["onClick"])]),_:1}),o(a,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"})]),_:1},8,["data"]),I("div",Z,[o(E,{type:"primary",onClick:c.onEmpowerRoles},{default:s(()=>[m("\u63D0\u4EA4")]),_:1},8,["onClick"]),o(E,{onClick:t[1]||(t[1]=r=>e.$router.push("/system/user"))},{default:s(()=>[m("\u8FD4\u56DE")]),_:1})])],64)}const te=p(X,[["render",ee],["__scopeId","data-v-f961a3b9"]]),oe={components:{EssentialInformation:O,RolesInformation:te}};function se(e,t,d,n,l,c){const u=g("EssentialInformation"),i=g("RolesInformation");return f(),h("div",null,[o(u),o(i)])}const he=p(oe,[["render",se]]);export{he as default};
