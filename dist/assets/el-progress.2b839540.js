import{y as H,B as h,J as j,L as M,I as S,cO as Re,cP as ce,ci as Fe,cQ as pe,at as fe,X as ve,D as ee,o as m,d as w,U as v,V as e,e as N,aa as q,T as F,ab as W,ac as k,a8 as D,w as L,a9 as Te,b as A,W as z,ag as ye,$ as x,C as ge,bv as me,aj as Q,bO as C,ao as Le,aS as V,H as he,F as Ue,aA as _e,g as be,as as K,f as B,cR as De,ax as Oe,cS as Be,ad as Ne,Y as je,ar as Y,cT as te,cU as qe,cV as Ae,M as se,N as Ie,a1 as Me,O as Ke,bw as He,cq as ae,aK as oe}from"./index.41bf9c1b.js";import{c as ne}from"./cloneDeep.6e207ca9.js";import{q as ze}from"./isEqual.f69c734a.js";const We=H({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:a=>a>=0&&a<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:h(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:h([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:h(Function),default:a=>`${a}%`}}),Ve=["aria-valuenow"],Xe={viewBox:"0 0 100 100"},Je=["d","stroke","stroke-linecap","stroke-width"],Ge=["d","stroke","opacity","stroke-linecap","stroke-width"],Qe={key:0},Ye=j({name:"ElProgress"}),Ze=j({...Ye,props:We,setup(a){const t=a,s={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},i=M("progress"),p=S(()=>({width:`${t.percentage}%`,animationDuration:`${t.duration}s`,background:P(t.percentage)})),d=S(()=>(t.strokeWidth/t.width*100).toFixed(1)),y=S(()=>["circle","dashboard"].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(d.value)/2}`,10):0),E=S(()=>{const n=y.value,R=t.type==="dashboard";return`
          M 50 50
          m 0 ${R?"":"-"}${n}
          a ${n} ${n} 0 1 1 0 ${R?"-":""}${n*2}
          a ${n} ${n} 0 1 1 0 ${R?"":"-"}${n*2}
          `}),b=S(()=>2*Math.PI*y.value),$=S(()=>t.type==="dashboard"?.75:1),T=S(()=>`${-1*b.value*(1-$.value)/2}px`),g=S(()=>({strokeDasharray:`${b.value*$.value}px, ${b.value}px`,strokeDashoffset:T.value})),l=S(()=>({strokeDasharray:`${b.value*$.value*(t.percentage/100)}px, ${b.value}px`,strokeDashoffset:T.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),o=S(()=>{let n;return t.color?n=P(t.percentage):n=s[t.status]||s.default,n}),c=S(()=>t.status==="warning"?Re:t.type==="line"?t.status==="success"?ce:Fe:t.status==="success"?pe:fe),r=S(()=>t.type==="line"?12+t.strokeWidth*.4:t.width*.111111+2),f=S(()=>t.format(t.percentage));function u(n){const R=100/n.length;return n.map((U,_)=>ee(U)?{color:U,percentage:(_+1)*R}:U).sort((U,_)=>U.percentage-_.percentage)}const P=n=>{var R;const{color:O}=t;if(ve(O))return O(n);if(ee(O))return O;{const U=u(O);for(const _ of U)if(_.percentage>n)return _.color;return(R=U[U.length-1])==null?void 0:R.color}};return(n,R)=>(m(),w("div",{class:v([e(i).b(),e(i).m(n.type),e(i).is(n.status),{[e(i).m("without-text")]:!n.showText,[e(i).m("text-inside")]:n.textInside}]),role:"progressbar","aria-valuenow":n.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[n.type==="line"?(m(),w("div",{key:0,class:v(e(i).b("bar"))},[N("div",{class:v(e(i).be("bar","outer")),style:q({height:`${n.strokeWidth}px`})},[N("div",{class:v([e(i).be("bar","inner"),{[e(i).bem("bar","inner","indeterminate")]:n.indeterminate},{[e(i).bem("bar","inner","striped")]:n.striped},{[e(i).bem("bar","inner","striped-flow")]:n.stripedFlow}]),style:q(e(p))},[(n.showText||n.$slots.default)&&n.textInside?(m(),w("div",{key:0,class:v(e(i).be("bar","innerText"))},[F(n.$slots,"default",{percentage:n.percentage},()=>[N("span",null,W(e(f)),1)])],2)):k("v-if",!0)],6)],6)],2)):(m(),w("div",{key:1,class:v(e(i).b("circle")),style:q({height:`${n.width}px`,width:`${n.width}px`})},[(m(),w("svg",Xe,[N("path",{class:v(e(i).be("circle","track")),d:e(E),stroke:`var(${e(i).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":n.strokeLinecap,"stroke-width":e(d),fill:"none",style:q(e(g))},null,14,Je),N("path",{class:v(e(i).be("circle","path")),d:e(E),stroke:e(o),fill:"none",opacity:n.percentage?1:0,"stroke-linecap":n.strokeLinecap,"stroke-width":e(d),style:q(e(l))},null,14,Ge)]))],6)),(n.showText||n.$slots.default)&&!n.textInside?(m(),w("div",{key:2,class:v(e(i).e("text")),style:q({fontSize:`${e(r)}px`})},[F(n.$slots,"default",{percentage:n.percentage},()=>[n.status?(m(),D(e(A),{key:1},{default:L(()=>[(m(),D(Te(e(c))))]),_:1})):(m(),w("span",Qe,W(e(f)),1))])],6)):k("v-if",!0)],10,Ve))}});var xe=z(Ze,[["__file","progress.vue"]]);const et=ye(xe),ke=Symbol("uploadContextKey"),tt="ElUpload";class st extends Error{constructor(t,s,i,p){super(t),this.name="UploadAjaxError",this.status=s,this.method=i,this.url=p}}function re(a,t,s){let i;return s.response?i=`${s.response.error||s.response}`:s.responseText?i=`${s.responseText}`:i=`fail to ${t.method} ${a} ${s.status}`,new st(i,s.status,t.method,a)}function at(a){const t=a.responseText||a.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const ot=a=>{typeof XMLHttpRequest>"u"&&x(tt,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,s=a.action;t.upload&&t.upload.addEventListener("progress",d=>{const y=d;y.percent=d.total>0?d.loaded/d.total*100:0,a.onProgress(y)});const i=new FormData;if(a.data)for(const[d,y]of Object.entries(a.data))ge(y)&&y.length?i.append(d,...y):i.append(d,y);i.append(a.filename,a.file,a.file.name),t.addEventListener("error",()=>{a.onError(re(s,a,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return a.onError(re(s,a,t));a.onSuccess(at(t))}),t.open(a.method,s,!0),a.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const p=a.headers||{};if(p instanceof Headers)p.forEach((d,y)=>t.setRequestHeader(y,d));else for(const[d,y]of Object.entries(p))me(y)||t.setRequestHeader(d,String(y));return t.send(i),t},$e=["text","picture","picture-card"];let nt=1;const Z=()=>Date.now()+nt++,we=H({action:{type:String,default:"#"},headers:{type:h(Object)},method:{type:String,default:"post"},data:{type:h([Object,Function,Promise]),default:()=>Q({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:h(Array),default:()=>Q([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:$e,default:"text"},httpRequest:{type:h(Function),default:ot},disabled:Boolean,limit:Number}),rt=H({...we,beforeUpload:{type:h(Function),default:C},beforeRemove:{type:h(Function)},onRemove:{type:h(Function),default:C},onChange:{type:h(Function),default:C},onPreview:{type:h(Function),default:C},onSuccess:{type:h(Function),default:C},onProgress:{type:h(Function),default:C},onError:{type:h(Function),default:C},onExceed:{type:h(Function),default:C},crossorigin:{type:h(String)}}),lt=H({files:{type:h(Array),default:()=>Q([])},disabled:{type:Boolean,default:!1},handlePreview:{type:h(Function),default:C},listType:{type:String,values:$e,default:"text"},crossorigin:{type:h(String)}}),it={remove:a=>!!a},ut=["onKeydown"],dt=["src","crossorigin"],ct=["onClick"],pt=["title"],ft=["onClick"],vt=["onClick"],yt=j({name:"ElUploadList"}),gt=j({...yt,props:lt,emits:it,setup(a,{emit:t}){const s=a,{t:i}=Le(),p=M("upload"),d=M("icon"),y=M("list"),E=V(),b=he(!1),$=S(()=>[p.b("list"),p.bm("list",s.listType),p.is("disabled",s.disabled)]),T=g=>{t("remove",g)};return(g,l)=>(m(),D(Ne,{tag:"ul",class:v(e($)),name:e(y).b()},{default:L(()=>[(m(!0),w(Ue,null,_e(g.files,o=>(m(),w("li",{key:o.uid||o.name,class:v([e(p).be("list","item"),e(p).is(o.status),{focusing:b.value}]),tabindex:"0",onKeydown:be(c=>!e(E)&&T(o),["delete"]),onFocus:l[0]||(l[0]=c=>b.value=!0),onBlur:l[1]||(l[1]=c=>b.value=!1),onClick:l[2]||(l[2]=c=>b.value=!1)},[F(g.$slots,"default",{file:o},()=>[g.listType==="picture"||o.status!=="uploading"&&g.listType==="picture-card"?(m(),w("img",{key:0,class:v(e(p).be("list","item-thumbnail")),src:o.url,crossorigin:g.crossorigin,alt:""},null,10,dt)):k("v-if",!0),o.status==="uploading"||g.listType!=="picture-card"?(m(),w("div",{key:1,class:v(e(p).be("list","item-info"))},[N("a",{class:v(e(p).be("list","item-name")),onClick:K(c=>g.handlePreview(o),["prevent"])},[B(e(A),{class:v(e(d).m("document"))},{default:L(()=>[B(e(De))]),_:1},8,["class"]),N("span",{class:v(e(p).be("list","item-file-name")),title:o.name},W(o.name),11,pt)],10,ct),o.status==="uploading"?(m(),D(e(et),{key:0,type:g.listType==="picture-card"?"circle":"line","stroke-width":g.listType==="picture-card"?6:2,percentage:Number(o.percentage),style:q(g.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):k("v-if",!0)],2)):k("v-if",!0),N("label",{class:v(e(p).be("list","item-status-label"))},[g.listType==="text"?(m(),D(e(A),{key:0,class:v([e(d).m("upload-success"),e(d).m("circle-check")])},{default:L(()=>[B(e(ce))]),_:1},8,["class"])):["picture-card","picture"].includes(g.listType)?(m(),D(e(A),{key:1,class:v([e(d).m("upload-success"),e(d).m("check")])},{default:L(()=>[B(e(pe))]),_:1},8,["class"])):k("v-if",!0)],2),e(E)?k("v-if",!0):(m(),D(e(A),{key:2,class:v(e(d).m("close")),onClick:c=>T(o)},{default:L(()=>[B(e(fe))]),_:2},1032,["class","onClick"])),k(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),k(" This is a bug which needs to be fixed "),k(" TODO: Fix the incorrect navigation interaction "),e(E)?k("v-if",!0):(m(),w("i",{key:3,class:v(e(d).m("close-tip"))},W(e(i)("el.upload.deleteTip")),3)),g.listType==="picture-card"?(m(),w("span",{key:4,class:v(e(p).be("list","item-actions"))},[N("span",{class:v(e(p).be("list","item-preview")),onClick:c=>g.handlePreview(o)},[B(e(A),{class:v(e(d).m("zoom-in"))},{default:L(()=>[B(e(Oe))]),_:1},8,["class"])],10,ft),e(E)?k("v-if",!0):(m(),w("span",{key:0,class:v(e(p).be("list","item-delete")),onClick:c=>T(o)},[B(e(A),{class:v(e(d).m("delete"))},{default:L(()=>[B(e(Be))]),_:1},8,["class"])],10,vt))],2)):k("v-if",!0)])],42,ut))),128)),F(g.$slots,"append")]),_:3},8,["class","name"]))}});var le=z(gt,[["__file","upload-list.vue"]]);const mt=H({disabled:{type:Boolean,default:!1}}),ht={file:a=>ge(a)},bt=["onDrop","onDragover"],Ee="ElUploadDrag",kt=j({name:Ee}),$t=j({...kt,props:mt,emits:ht,setup(a,{emit:t}){je(ke)||x(Ee,"usage: <el-upload><el-upload-dragger /></el-upload>");const i=M("upload"),p=he(!1),d=V(),y=b=>{if(d.value)return;p.value=!1,b.stopPropagation();const $=Array.from(b.dataTransfer.files);t("file",$)},E=()=>{d.value||(p.value=!0)};return(b,$)=>(m(),w("div",{class:v([e(i).b("dragger"),e(i).is("dragover",p.value)]),onDrop:K(y,["prevent"]),onDragover:K(E,["prevent"]),onDragleave:$[0]||($[0]=K(T=>p.value=!1,["prevent"]))},[F(b.$slots,"default")],42,bt))}});var wt=z($t,[["__file","upload-dragger.vue"]]);const Et=H({...we,beforeUpload:{type:h(Function),default:C},onRemove:{type:h(Function),default:C},onStart:{type:h(Function),default:C},onSuccess:{type:h(Function),default:C},onProgress:{type:h(Function),default:C},onError:{type:h(Function),default:C},onExceed:{type:h(Function),default:C}}),St=["onKeydown"],Ct=["name","multiple","accept"],Pt=j({name:"ElUploadContent",inheritAttrs:!1}),Rt=j({...Pt,props:Et,setup(a,{expose:t}){const s=a,i=M("upload"),p=V(),d=Y({}),y=Y(),E=r=>{if(r.length===0)return;const{autoUpload:f,limit:u,fileList:P,multiple:n,onStart:R,onExceed:O}=s;if(u&&P.length+r.length>u){O(r,P);return}n||(r=r.slice(0,1));for(const U of r){const _=U;_.uid=Z(),R(_),f&&b(_)}},b=async r=>{if(y.value.value="",!s.beforeUpload)return T(r);let f,u={};try{const n=s.data,R=s.beforeUpload(r);u=te(s.data)?ne(s.data):s.data,f=await R,te(s.data)&&ze(n,u)&&(u=ne(s.data))}catch{f=!1}if(f===!1){s.onRemove(r);return}let P=r;f instanceof Blob&&(f instanceof File?P=f:P=new File([f],r.name,{type:r.type})),T(Object.assign(P,{uid:r.uid}),u)},$=async(r,f)=>ve(r)?r(f):r,T=async(r,f)=>{const{headers:u,data:P,method:n,withCredentials:R,name:O,action:U,onProgress:_,onSuccess:Se,onError:Ce,httpRequest:Pe}=s;try{f=await $(f!=null?f:P,r)}catch{s.onRemove(r);return}const{uid:X}=r,J={headers:u||{},withCredentials:R,file:r,data:f,method:n,filename:O,action:U,onProgress:I=>{_(I,r)},onSuccess:I=>{Se(I,r),delete d.value[X]},onError:I=>{Ce(I,r),delete d.value[X]}},G=Pe(J);d.value[X]=G,G instanceof Promise&&G.then(J.onSuccess,J.onError)},g=r=>{const f=r.target.files;!f||E(Array.from(f))},l=()=>{p.value||(y.value.value="",y.value.click())},o=()=>{l()};return t({abort:r=>{qe(d.value).filter(r?([u])=>String(r.uid)===u:()=>!0).forEach(([u,P])=>{P instanceof XMLHttpRequest&&P.abort(),delete d.value[u]})},upload:b}),(r,f)=>(m(),w("div",{class:v([e(i).b(),e(i).m(r.listType),e(i).is("drag",r.drag)]),tabindex:"0",onClick:l,onKeydown:be(K(o,["self"]),["enter","space"])},[r.drag?(m(),D(wt,{key:0,disabled:e(p),onFile:E},{default:L(()=>[F(r.$slots,"default")]),_:3},8,["disabled"])):F(r.$slots,"default",{key:1}),N("input",{ref_key:"inputRef",ref:y,class:v(e(i).e("input")),name:r.name,multiple:r.multiple,accept:r.accept,type:"file",onChange:g,onClick:f[0]||(f[0]=K(()=>{},["stop"]))},null,42,Ct)],42,St))}});var ie=z(Rt,[["__file","upload-content.vue"]]);const ue="ElUpload",de=a=>{var t;(t=a.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(a.url)},Ft=(a,t)=>{const s=Ae(a,"fileList",void 0,{passive:!0}),i=l=>s.value.find(o=>o.uid===l.uid);function p(l){var o;(o=t.value)==null||o.abort(l)}function d(l=["ready","uploading","success","fail"]){s.value=s.value.filter(o=>!l.includes(o.status))}const y=(l,o)=>{const c=i(o);!c||(console.error(l),c.status="fail",s.value.splice(s.value.indexOf(c),1),a.onError(l,c,s.value),a.onChange(c,s.value))},E=(l,o)=>{const c=i(o);!c||(a.onProgress(l,c,s.value),c.status="uploading",c.percentage=Math.round(l.percent))},b=(l,o)=>{const c=i(o);!c||(c.status="success",c.response=l,a.onSuccess(l,c,s.value),a.onChange(c,s.value))},$=l=>{me(l.uid)&&(l.uid=Z());const o={name:l.name,percentage:0,status:"ready",size:l.size,raw:l,uid:l.uid};if(a.listType==="picture-card"||a.listType==="picture")try{o.url=URL.createObjectURL(l)}catch(c){Ie(ue,c.message),a.onError(c,o,s.value)}s.value=[...s.value,o],a.onChange(o,s.value)},T=async l=>{const o=l instanceof File?i(l):l;o||x(ue,"file to be removed not found");const c=r=>{p(r);const f=s.value;f.splice(f.indexOf(r),1),a.onRemove(r,f),de(r)};a.beforeRemove?await a.beforeRemove(o,s.value)!==!1&&c(o):c(o)};function g(){s.value.filter(({status:l})=>l==="ready").forEach(({raw:l})=>{var o;return l&&((o=t.value)==null?void 0:o.upload(l))})}return se(()=>a.listType,l=>{l!=="picture-card"&&l!=="picture"||(s.value=s.value.map(o=>{const{raw:c,url:r}=o;if(!r&&c)try{o.url=URL.createObjectURL(c)}catch(f){a.onError(f,o,s.value)}return o}))}),se(s,l=>{for(const o of l)o.uid||(o.uid=Z()),o.status||(o.status="success")},{immediate:!0,deep:!0}),{uploadFiles:s,abort:p,clearFiles:d,handleError:y,handleProgress:E,handleStart:$,handleSuccess:b,handleRemove:T,submit:g,revokeFileObjectURL:de}},Tt=j({name:"ElUpload"}),Lt=j({...Tt,props:rt,setup(a,{expose:t}){const s=a,i=V(),p=Y(),{abort:d,submit:y,clearFiles:E,uploadFiles:b,handleStart:$,handleError:T,handleRemove:g,handleSuccess:l,handleProgress:o,revokeFileObjectURL:c}=Ft(s,p),r=S(()=>s.listType==="picture-card"),f=S(()=>({...s,fileList:b.value,onStart:$,onProgress:o,onSuccess:l,onError:T,onRemove:g}));return Me(()=>{b.value.forEach(c)}),Ke(ke,{accept:He(s,"accept")}),t({abort:d,submit:y,clearFiles:E,handleStart:$,handleRemove:g}),(u,P)=>(m(),w("div",null,[e(r)&&u.showFileList?(m(),D(le,{key:0,disabled:e(i),"list-type":u.listType,files:e(b),crossorigin:u.crossorigin,"handle-preview":u.onPreview,onRemove:e(g)},ae({append:L(()=>[B(ie,oe({ref_key:"uploadRef",ref:p},e(f)),{default:L(()=>[u.$slots.trigger?F(u.$slots,"trigger",{key:0}):k("v-if",!0),!u.$slots.trigger&&u.$slots.default?F(u.$slots,"default",{key:1}):k("v-if",!0)]),_:3},16)]),_:2},[u.$slots.file?{name:"default",fn:L(({file:n})=>[F(u.$slots,"file",{file:n})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):k("v-if",!0),!e(r)||e(r)&&!u.showFileList?(m(),D(ie,oe({key:1,ref_key:"uploadRef",ref:p},e(f)),{default:L(()=>[u.$slots.trigger?F(u.$slots,"trigger",{key:0}):k("v-if",!0),!u.$slots.trigger&&u.$slots.default?F(u.$slots,"default",{key:1}):k("v-if",!0)]),_:3},16)):k("v-if",!0),u.$slots.trigger?F(u.$slots,"default",{key:2}):k("v-if",!0),F(u.$slots,"tip"),!e(r)&&u.showFileList?(m(),D(le,{key:3,disabled:e(i),"list-type":u.listType,files:e(b),crossorigin:u.crossorigin,"handle-preview":u.onPreview,onRemove:e(g)},ae({_:2},[u.$slots.file?{name:"default",fn:L(({file:n})=>[F(u.$slots,"file",{file:n})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):k("v-if",!0)]))}});var Ut=z(Lt,[["__file","upload.vue"]]);const Bt=ye(Ut);export{Bt as E};
