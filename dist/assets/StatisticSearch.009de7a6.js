import{bh as A,bi as k,_ as C,r as E,o as u,a8 as M,w as a,aB as R,aC as D,f as o,d as f,aA as P,F,h as _,E as T,b as N,c as U,bD as V,bE as m,e as c,ac as S,p as q,i as O}from"./index.41bf9c1b.js";import{E as L}from"./el-pagination.1e9489f1.js";import{E as j,a as G}from"./el-table-column.4b985531.js";import{E as H,a as W}from"./el-select.1fc6c445.js";import"./el-popper.7ae0c7d7.js";import{E as J}from"./el-link.e79f8a31.js";/* empty css                       *//* empty css                   */import{h}from"./moment.40bc58bf.js";import"./el-collapse-transition.bb7c8a08.js";import{E as K}from"./el-date-picker.79f6dda8.js";import{u as B}from"./EnumGlobalStore.f9b8c63d.js";import{E as X}from"./index.aa5a1392.js";import{E as Z,a as Q}from"./index.39967f43.js";import{f as $,u as ee}from"./unfinish.f0210631.js";import"./isEqual.f69c734a.js";import"./debounce.917afbd5.js";import"./index.6f6ffc3e.js";import"./index.01c8af0b.js";import"./strings.2f51a18b.js";import"./castArray.422477ef.js";import"./index.56404ca9.js";import"./index.5d666713.js";const te=e=>A({url:"/statistics/selectCompanyEnergy",loading:!0,data:e});const oe={props:["show"],emits:["onSearch"],data(){return{form:{companyName:"",startTime:"",endTime:"",reportStatus:""},system_global_status:[],statusList:[{value:"1",label:"\u5DF2\u4E0A\u62A5"},{value:"0",label:"\u672A\u4E0A\u62A5"},{value:"2",label:"\u90E8\u5206\u4E0A\u62A5"}]}},methods:{...k(B,["resolveDictItemEnum"]),async init(){const e=await this.resolveDictItemEnum(["system_global_status"]);Object.assign(this,e)},handleReset(){this.$emit("onSearch",{}),this.$refs.formRef.resetFields()},handleSearch(){const e=Object.entries(this.form).reduce((t,[d,g])=>(g!==""&&(t[d]=g),t),{});this.$emit("onSearch",e)}},created(){this.init()}};function ne(e,t,d,g,n,i){const b=T,l=Z,p=K,y=H,x=W,r=E("Search"),w=N,v=U,I=E("Refresh"),z=Q,Y=X;return u(),M(Y,null,{default:a(()=>[R(o(z,{class:"sys-filters",ref:"formRef",inline:"",model:n.form},{default:a(()=>[o(l,{label:"\u4F01\u4E1A\u540D\u79F0",prop:"companyName"},{default:a(()=>[o(b,{placeholder:"\u8BF7\u8F93\u5165\u4F01\u4E1A\u540D\u79F0",clearable:"",modelValue:n.form.companyName,"onUpdate:modelValue":t[0]||(t[0]=s=>n.form.companyName=s)},null,8,["modelValue"])]),_:1}),o(l,{label:"\u5E74\u5EA6",prop:"year"},{default:a(()=>[o(p,{modelValue:n.form.year,"onUpdate:modelValue":t[1]||(t[1]=s=>n.form.year=s),type:"year",placeholder:"\u9009\u62E9\u5E74",clearable:""},null,8,["modelValue"])]),_:1}),o(l,{label:"\u5F00\u59CB\u6708\u4EFD",prop:"startMonth"},{default:a(()=>[o(p,{modelValue:n.form.startMonth,"onUpdate:modelValue":t[2]||(t[2]=s=>n.form.startMonth=s),type:"month",placeholder:"\u9009\u62E9\u6708",clearable:""},null,8,["modelValue"])]),_:1}),o(l,{label:"\u7ED3\u675F\u6708\u4EFD",prop:"endMonth"},{default:a(()=>[o(p,{modelValue:n.form.endMonth,"onUpdate:modelValue":t[3]||(t[3]=s=>n.form.endMonth=s),type:"month",placeholder:"\u9009\u62E9\u6708",clearable:""},null,8,["modelValue"])]),_:1}),o(l,{label:"\u4E0A\u62A5\u72B6\u6001",prop:"reportStatus"},{default:a(()=>[o(x,{modelValue:n.form.reportStatus,"onUpdate:modelValue":t[4]||(t[4]=s=>n.form.reportStatus=s),placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:a(()=>[(u(!0),f(F,null,P(n.statusList,s=>(u(),M(y,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(l,null,{default:a(()=>[o(v,{type:"primary",onClick:i.handleSearch},{default:a(()=>[o(w,null,{default:a(()=>[o(r)]),_:1}),_(" \u67E5\u8BE2 ")]),_:1},8,["onClick"]),o(v,{onClick:i.handleReset},{default:a(()=>[o(w,null,{default:a(()=>[o(I)]),_:1}),_(" \u91CD\u7F6E ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),[[D,d.show]])]),_:1})}const le=C(oe,[["render",ne],["__scopeId","data-v-79c1f082"]]);const ae={data(){return{thStyle:{color:"#9E9FA0",fontWeight:"100"},finish:$,unfinish:ee,showSearch:!0,editorBox:{show:!1,type:1,ids:[]},uploadBox:{show:!1},tableData:[],pageIndex:1,pageSize:10,count:0}},computed:{checkedAll:{get(){const e=this.tableData;return e.length===0?!1:e.every(t=>t.checked)},set(e){this.tableData.forEach(t=>t.checked=e)}},selectedRows(){return this.tableData.filter(e=>e.checked)},shouldDisabled(){return this.selectedRows.length===0}},methods:{...k(B,["resolveDictItemEnum"]),async init(){const e=await te({...this.searchQuery,current:this.pageIndex,size:this.pageSize});this.pageIndex=e.current,this.pageSize=e.size,this.count=e.total,this.tableData=e.records},async onRemoveRow({id:e}){V.confirm("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6570\u636E\u5417 ?","\u7CFB\u7EDF\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{m.success("\u5220\u9664\u6210\u529F"),this.init()}).catch(()=>null)},async onBatchRemoveRow(){V.confirm("\u60A8\u786E\u5B9A\u8981\u6279\u91CF\u5220\u9664\u9009\u4E2D\u7684\u6570\u636E\u5417 ?","\u7CFB\u7EDF\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{m.success("\u6279\u91CF\u5220\u9664\u6210\u529F"),this.init()}).catch(()=>null)},onSearch(e){var t=e;if(h(e.startMonth).format("YYYY")!=h(e.endMonth).format("YYYY"))return m.error("\u7ED3\u675F\u6708\u4EFD\u4E0D\u80FD\u8DE8\u5E74");if(e.year?t.year=h(e.year).format("YYYY"):e.startMonth&&(t.year=h(e.startMonth).format("YYYY")),e.startMonth&&(t.startMonth=h(e.startMonth).format("MM")),e.endMonth&&(t.endMonth=h(e.endMonth).format("MM")),t.endMonth<t.startMonth)return m.error("\u5F00\u59CB\u6708\u4EFD\u4E0D\u80FD\u5927\u4E8E\u7ED3\u675F\u6708\u4EFD");if(!t.endMonth&&t.startMonth)return m.error("\u8BF7\u9009\u62E9\u7ED3\u675F\u6708\u4EFD");if(t.endMonth&&!t.startMonth)return m.error("\u8BF7\u9009\u62E9\u5F00\u59CB\u6708\u4EFD");this.searchQuery=t,this.init()},onEditorChange(e,t){e===2?t=[t]:e===3&&(t=this.selectedRows.map(d=>d.id)),this.editorBox.show=!0,this.editorBox.ids=t,this.editorBox.type=e},onUploadChange(){this.uploadBox.show=!0},upload(){},onPageChange(e,t){this.init()},indexAdd(e){return e+1+(this.pageIndex-1)*this.pageSize}},components:{Filters:le},created(){this.init()}},re=e=>(q("data-v-f430fa86"),e=e(),O(),e),se={class:"SystemPost"},ie={class:"table-content"},pe={class:"sys-table-main-actions"},ce={key:0,class:"finish"},ue=["src"],de={key:1,class:"unfinish"},me=["src"],he={key:2,class:"finish"},fe=["src"],_e={class:"sys-table-footer"},ge=re(()=>c("div",null,null,-1));function be(e,t,d,g,n,i){const b=E("Filters"),l=j,p=J,y=G,x=L;return u(),f("div",se,[o(b,{show:n.showSearch,onOnSearch:i.onSearch},null,8,["show","onOnSearch"]),c("div",ie,[o(y,{data:n.tableData,stripe:"","header-cell-style":n.thStyle},{default:a(()=>[o(l,{width:"80",index:i.indexAdd,label:"\u5E8F\u53F7",align:"center",type:"index"},null,8,["index"]),o(l,{width:"200",prop:"companyName",label:"\u4F01\u4E1A\u540D\u79F0",align:"center"}),o(l,{prop:"year",label:"\u5E74\u5EA6",align:"center"}),o(l,{prop:"month",label:"\u6708\u4EFD",align:"center"}),o(l,{prop:"complexEquivalenceValue",width:"180",label:`\u7EFC\u5408\u80FD\u6E90\u6D88\u8D39\u603B\u91CF\u7B49\u4EF7\u503C 
\uFF08\u5428\u6807\u51C6\u7164\uFF09`,align:"center"}),o(l,{prop:"complexEquivalentValue",width:"180",label:`\u7EFC\u5408\u80FD\u6E90\u6D88\u8D39\u603B\u91CF\u5F53\u91CF\u503C
\uFF08\u5428\u6807\u51C6\u7164\uFF09`,align:"center"}),o(l,{prop:"outputValue",width:"130",label:`\u4EA7\u503C/\u8425\u4E1A\u6536\u5165
\uFF08\u4E07\u5143\uFF09`,align:"center"}),o(l,{prop:"unitEquivalenceValue",width:"160",label:`\u5355\u4F4D\u4EA7\u503C\u80FD\u8017\u7B49\u4EF7\u503C
\uFF08\u5428\u6807\u51C6\u7164/\u4E07\u5143\uFF09`,align:"center"}),o(l,{prop:"unitEquivalentValue",width:"160",label:`\u5355\u4F4D\u4EA7\u503C\u80FD\u8017\u5F53\u91CF\u503C
\uFF08\u5428\u6807\u51C6\u7164/\u4E07\u5143\uFF09`,align:"center"}),o(l,{prop:"electricityAmount",width:"140",label:`\u7528\u7535\u91CF
\uFF08\u4E07\u5343\u74E6\u65F6\uFF09`,sortable:"","render-header":e.renderHeader,align:"center"},null,8,["render-header"]),o(l,{prop:"coalAmount",width:"110",label:`\u7528\u7164\u91CF
\uFF08\u4E07\u5428\uFF09`,sortable:"",align:"center"}),o(l,{prop:"oilAmount",width:"110",sortable:"",label:`\u7528\u6CB9\u91CF
\uFF08\u4E07\u5428\uFF09`,align:"center"}),o(l,{prop:"gasAmount",width:"140",label:`\u7528\u6C14\u91CF
\uFF08\u4E07\u7ACB\u65B9\u7C73\uFF09`,sortable:"",align:"center"}),o(l,{prop:"waterAmount",width:"110",label:`\u7528\u6C34\u91CF
\uFF08\u4E07\u5428\uFF09`,align:"center",sortable:""}),o(l,{prop:"steamAmount",width:"150",label:`\u7528\u6C34\u84B8\u6C14\u91CF
\uFF08\u767E\u4E07\u5343\u7126\uFF09`,sortable:"",align:"center"}),o(l,{prop:"otherAmount",width:"110",label:`\u5176\u4ED6
\uFF08\u4E07\u5428\uFF09`,align:"center",sortable:""}),o(l,{prop:"outputEquivalentValue",width:"140",label:`\u4EA7\u51FA\u80FD\u6E90\u91CF\u5F53\u91CF\u503C
\uFF08\u5428\u6807\u51C6\u7164\uFF09`,sortable:"",align:"center"}),o(l,{prop:"outputEquivalenceValue",width:"160",label:`\u4EA7\u51FA\u80FD\u6E90\u91CF\u7B49\u4EF7\u503C
\uFF08\u5428\u6807\u51C6\u7164\uFF09`,sortable:"",align:"center"}),o(l,{label:"\u4E0A\u62A5\u72B6\u6001",align:"center",width:"120",fixed:"right"},{default:a(({row:r})=>[c("div",pe,[r.reportStatus==1?(u(),f("div",ce,[o(p,{type:"primary",underline:!1},{default:a(()=>[c("img",{src:n.finish,style:{width:"12px",height:"12px","margin-right":"5px"}},null,8,ue),_(" \u5DF2\u4E0A\u62A5 ")]),_:1})])):S("",!0),r.reportStatus<1?(u(),f("div",de,[o(p,{type:"danger",underline:!1,style:{color:"#ff9f49"}},{default:a(()=>[c("img",{src:n.unfinish,style:{width:"12px",height:"12px","margin-right":"5px"}},null,8,me),_(" \u672A\u4E0A\u62A5 ")]),_:1})])):S("",!0),r.reportStatus==2?(u(),f("div",he,[o(p,{type:"primary",underline:!1,onClick:w=>i.onEditorChange(2,r.id)},{default:a(()=>[c("img",{src:n.finish,style:{width:"12px",height:"12px","margin-right":"5px"}},null,8,fe),_(" \u90E8\u5206\u4E0A\u62A5 ")]),_:2},1032,["onClick"])])):S("",!0)])]),_:1})]),_:1},8,["data","header-cell-style"]),c("div",_e,[ge,o(x,{currentPage:n.pageIndex,"onUpdate:currentPage":t[0]||(t[0]=r=>n.pageIndex=r),"page-size":n.pageSize,"onUpdate:pageSize":t[1]||(t[1]=r=>n.pageSize=r),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:n.count,onSizeChange:t[2]||(t[2]=r=>i.onPageChange(n.pageIndex,r)),onCurrentChange:t[3]||(t[3]=r=>i.onPageChange(r,n.pageSize))},null,8,["currentPage","page-size","total"])])])])}const Oe=C(ae,[["render",be],["__scopeId","data-v-f430fa86"]]);export{Oe as default};
